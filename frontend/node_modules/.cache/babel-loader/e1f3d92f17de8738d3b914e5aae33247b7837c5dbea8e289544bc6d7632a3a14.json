{"ast":null,"code":"var _jsxFileName = \"/Users/halilberkaysahin/Desktop/sonlara geldik/moda-aynasi/frontend/src/components/ProductSuggestions.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\nimport LoadingSpinner from './LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProductSuggestions({\n  photoData,\n  weatherData,\n  onSuggestionsLoaded\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [suggestions, setSuggestions] = useState([]);\n  useEffect(() => {\n    const analyzeImage = async () => {\n      if (!photoData) return;\n      setLoading(true);\n      try {\n        const response = await api.post(\"/analyze\", {\n          image: photoData\n        });\n\n        // Hava durumuna göre önerileri filtrele\n        let filteredSuggestions = response.data.suggestions;\n        if (weatherData) {\n          const temp = weatherData.temperature;\n          filteredSuggestions = filteredSuggestions.filter(item => {\n            if (temp < 15) {\n              return !['tshirt', 'shorts'].includes(item.type);\n            } else if (temp > 25) {\n              return !['coat', 'sweater'].includes(item.type);\n            }\n            return true;\n          });\n        }\n        setSuggestions(filteredSuggestions);\n        onSuggestionsLoaded(filteredSuggestions);\n        setError(null);\n      } catch (error) {\n        console.error(\"Fotoğraf analizi yapılamadı:\", error);\n        setError(\"Ürün önerileri alınamadı. Lütfen tekrar deneyin.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n    if (photoData) {\n      analyzeImage();\n    }\n  }, [photoData, weatherData, onSuggestionsLoaded]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-soft\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold mb-4\",\n        children: \"\\xDCr\\xFCn \\xD6nerileri\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoadingSpinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-6 rounded-lg shadow-soft\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-lg font-bold mb-4\",\n        children: \"\\xDCr\\xFCn \\xD6nerileri\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-600\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-soft\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-lg font-bold mb-4\",\n      children: \"\\xDCr\\xFCn \\xD6nerileri\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), suggestions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: suggestions.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border rounded-lg p-4 hover:shadow-md transition-shadow\",\n        children: [item.image_url && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: item.image_url,\n          alt: item.name,\n          className: \"w-full h-48 object-cover rounded-md mb-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"font-semibold\",\n          children: item.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600\",\n          children: item.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this), weatherData && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 text-xs text-primary-600\",\n          children: [weatherData.temperature, \"\\xB0C i\\xE7in uygun\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this)]\n      }, item.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Hen\\xFCz foto\\u011Fraf \\xE7ekilmedi veya analiz edilmedi.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductSuggestions, \"Dvf3bW3yEa95OoNakDaXlposUxU=\");\n_c = ProductSuggestions;\nexport default ProductSuggestions;\nvar _c;\n$RefreshReg$(_c, \"ProductSuggestions\");","map":{"version":3,"names":["React","useEffect","useState","api","LoadingSpinner","jsxDEV","_jsxDEV","ProductSuggestions","photoData","weatherData","onSuggestionsLoaded","_s","loading","setLoading","error","setError","suggestions","setSuggestions","analyzeImage","response","post","image","filteredSuggestions","data","temp","temperature","filter","item","includes","type","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","image_url","src","alt","name","color","id","_c","$RefreshReg$"],"sources":["/Users/halilberkaysahin/Desktop/sonlara geldik/moda-aynasi/frontend/src/components/ProductSuggestions.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\nimport LoadingSpinner from './LoadingSpinner';\n\nfunction ProductSuggestions({ photoData, weatherData, onSuggestionsLoaded }) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [suggestions, setSuggestions] = useState([]);\n\n  useEffect(() => {\n    const analyzeImage = async () => {\n      if (!photoData) return;\n      \n      setLoading(true);\n      try {\n        const response = await api.post(\"/analyze\", {\n          image: photoData,\n        });\n        \n        // Hava durumuna göre önerileri filtrele\n        let filteredSuggestions = response.data.suggestions;\n        if (weatherData) {\n          const temp = weatherData.temperature;\n          filteredSuggestions = filteredSuggestions.filter(item => {\n            if (temp < 15) {\n              return !['tshirt', 'shorts'].includes(item.type);\n            } else if (temp > 25) {\n              return !['coat', 'sweater'].includes(item.type);\n            }\n            return true;\n          });\n        }\n\n        setSuggestions(filteredSuggestions);\n        onSuggestionsLoaded(filteredSuggestions);\n        setError(null);\n      } catch (error) {\n        console.error(\"Fotoğraf analizi yapılamadı:\", error);\n        setError(\"Ürün önerileri alınamadı. Lütfen tekrar deneyin.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (photoData) {\n      analyzeImage();\n    }\n  }, [photoData, weatherData, onSuggestionsLoaded]);\n\n  if (loading) {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-soft\">\n        <h2 className=\"text-lg font-bold mb-4\">Ürün Önerileri</h2>\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white p-6 rounded-lg shadow-soft\">\n        <h2 className=\"text-lg font-bold mb-4\">Ürün Önerileri</h2>\n        <div className=\"text-red-600\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-soft\">\n      <h2 className=\"text-lg font-bold mb-4\">Ürün Önerileri</h2>\n      {suggestions.length > 0 ? (\n        <div className=\"grid grid-cols-2 gap-4\">\n          {suggestions.map((item) => (\n            <div \n              key={item.id}\n              className=\"border rounded-lg p-4 hover:shadow-md transition-shadow\"\n            >\n              {item.image_url && (\n                <img \n                  src={item.image_url} \n                  alt={item.name}\n                  className=\"w-full h-48 object-cover rounded-md mb-2\"\n                />\n              )}\n              <h3 className=\"font-semibold\">{item.name}</h3>\n              <p className=\"text-sm text-gray-600\">{item.color}</p>\n              {weatherData && (\n                <div className=\"mt-2 text-xs text-primary-600\">\n                  {weatherData.temperature}°C için uygun\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      ) : (\n        <p>Henüz fotoğraf çekilmedi veya analiz edilmedi.</p>\n      )}\n    </div>\n  );\n}\n\nexport default ProductSuggestions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}